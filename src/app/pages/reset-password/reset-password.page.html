<!--
  Authors : initappz (Rahul Jograna)
  Website : https://initappz.com/
  App Name : Grocery Delivery App Source code is licensed as per the
  terms found in the Website https://initappz.com/license
  Copyright and Good Faith Purchasers Â© 2023-present initappz.
-->
<ion-header class="ion-no-border" mode="ios">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="util.onBack()">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{util.translate('Reset Password')}} </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div class="login_style_three" style="padding-top: 50px;">
    <div class="main_content_div">
      <div class="white_box animated animatedFadeInUp fadeInUp" *ngIf="util.reset_pwd == 0 && step == 1 ">
        <form #loginForm="ngForm" novalidate>
          <ion-label class="welcome_lbl">{{util.translate('Reset Password')}}</ion-label>
          <ion-label class="small_lbl">{{util.translate('Please enter your credentials')}}</ion-label>
          <ion-item>
            <ion-label position="floating">{{util.translate('Email Address')}}</ion-label>
            <ion-input [(ngModel)]="login.email" type="email" name="email" #email="ngModel" spellcheck="false"
              autocapitalize="off" required> </ion-input>
          </ion-item>
          <ion-text color="danger">
            <p [hidden]="email.valid || submitted == false">
              {{util.translate('Email is required')}}
            </p>
          </ion-text>

          <div style="text-align: center;margin-top: 30px;">
            <ion-button (click)="sendOTPonEmail(loginForm)" class="block_btn" [disabled]="isLogin">
              <span *ngIf="!isLogin"> {{util.translate('Send OTP')}}</span>
              <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
            </ion-button>
          </div>
        </form>
      </div>

      <div class="white_box animated animatedFadeInUp fadeInUp" *ngIf="util.reset_pwd == 0 && step == 2">
        <form #newPasswordForm="ngForm" novalidate>
          <ion-label class="welcome_lbl">{{util.translate('Reset Password')}}</ion-label>
          <ion-label class="small_lbl">{{util.translate('Please enter your credentials')}}</ion-label>
          <ion-item>
            <ion-label position="floating">{{util.translate('New Password')}}</ion-label>
            <ion-input [(ngModel)]="newPassword.password" type="password" name="password" #password="ngModel"
              spellcheck="false" autocapitalize="off" required> </ion-input>
          </ion-item>
          <ion-text color="danger">
            <p [hidden]="password.valid || submitted == false">
              {{util.translate('Password is required')}}
            </p>
          </ion-text>

          <ion-item>
            <ion-label position="floating">{{util.translate('Confirm Password')}}</ion-label>
            <ion-input [(ngModel)]="newPassword.confirm" type="password" name="confirmsPassword"
              #confirmsPassword="ngModel" spellcheck="false" autocapitalize="off" required> </ion-input>
          </ion-item>
          <ion-text color="danger">
            <p [hidden]="confirmsPassword.valid || submitted == false">
              {{util.translate('Confirm Password is required')}}
            </p>
          </ion-text>

          <div style="text-align: center;margin-top: 30px;">
            <ion-button (click)="validateOtp(newPasswordForm)" class="block_btn" [disabled]="isLogin">
              <span *ngIf="!isLogin"> {{util.translate('Update Password')}}</span>
              <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
            </ion-button>
          </div>
        </form>
      </div>


      <div class="white_box animated animatedFadeInUp fadeInUp" *ngIf="util.reset_pwd == 1 && step == 1">
        <form #loginWithPhoneOtpForm="ngForm" novalidate>
          <ion-label class="welcome_lbl">{{util.translate('Reset Password')}}</ion-label>
          <ion-label class="small_lbl">{{util.translate('Please enter your credentials')}}</ion-label>
          <ion-row>
            <ion-col size="3" (click)="openCountry()">
              <ion-item>
                <ion-input style="font-size: 12px;" [(ngModel)]="loginWithPhoneOTP.country_code" disabled="true"
                  type="text" name="ccode" #ccode="ngModel" spellcheck="false" autocapitalize="off" required
                  placeholder="+1">
                </ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="9">
              <ion-item>
                <ion-input [(ngModel)]="loginWithPhoneOTP.mobile" [placeholder]="util.translate('Mobile Number')"
                  type="number" name="mobile" #phone="ngModel" spellcheck="false" autocapitalize="off" required>
                </ion-input>
              </ion-item>
              <ion-text color="danger">
                <p [hidden]="phone.valid || submitted == false">
                  {{util.translate('Phone number is required')}}
                </p>
              </ion-text>
            </ion-col>
          </ion-row>



          <div style="text-align: center;margin-top: 30px;">
            <ion-button (click)="sendOTPonPhone(loginWithPhoneOtpForm)" class="block_btn" [disabled]="isLogin">
              <span *ngIf="!isLogin"> {{util.translate('Send OTP')}}</span>
              <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
            </ion-button>
          </div>
        </form>
      </div>

      <div class="white_box animated animatedFadeInUp fadeInUp" *ngIf="util.reset_pwd == 1 && step == 2">
        <form #newPasswordForm="ngForm" novalidate>
          <ion-label class="welcome_lbl">{{util.translate('Reset Password')}}</ion-label>
          <ion-label class="small_lbl">{{util.translate('Please enter your credentials')}}</ion-label>
          <ion-item>
            <ion-label position="floating">{{util.translate('New Password')}}</ion-label>
            <ion-input [(ngModel)]="newPassword.password" type="password" name="password" #password="ngModel"
              spellcheck="false" autocapitalize="off" required> </ion-input>
          </ion-item>
          <ion-text color="danger">
            <p [hidden]="password.valid || submitted == false">
              {{util.translate('Password is required')}}
            </p>
          </ion-text>

          <ion-item>
            <ion-label position="floating">{{util.translate('Confirm Password')}}</ion-label>
            <ion-input [(ngModel)]="newPassword.confirm" type="password" name="confirmsPassword"
              #confirmsPassword="ngModel" spellcheck="false" autocapitalize="off" required> </ion-input>
          </ion-item>
          <ion-text color="danger">
            <p [hidden]="confirmsPassword.valid || submitted == false">
              {{util.translate('Confirm Password is required')}}
            </p>
          </ion-text>

          <div style="text-align: center;margin-top: 30px;">
            <ion-button (click)="validateOtp(newPasswordForm)" class="block_btn" [disabled]="isLogin">
              <span *ngIf="!isLogin"> {{util.translate('Update Password')}}</span>
              <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
            </ion-button>
          </div>
        </form>
      </div>

    </div>
  </div>
</ion-content>